# Galgame 视觉控制器 👀🕹️

**通过眼部动作与头部姿态控制 Galgame 的智能交互系统**  
*让沉浸式体验突破次元壁，眨眼即翻页，抬头可锁屏*



## 项目简介

本程序基于机器视觉技术，通过实时检测用户眼部状态和头部姿态，实现以下核心功能：
- **眨眼触发点击**：精准识别眨眼动作，控制游戏对话翻页
- **头部姿态控制**：抬头持续 2 秒锁定工作站（Windows 专属）
- **自适应算法**：支持个性化眼部特征校准与灵敏度调节

技术栈：`MediaPipe` 面部特征检测 + `OpenCV` 图像处理 + `PyAutoGUI` 系统控制


---

## 功能特性

### 👁️ 智能眼控模块
- 双模态检测机制（连续闭眼帧 + 睁眼帧校验）
- 动态 EAR 阈值调节（0.15-0.99 可定制）
- 亚洲人眼型特征优化模型
- 多显示器坐标映射支持

### 🤖 头控交互模块
- 三维欧拉角姿态解析（Pitch/Yaw/Roll）
- 智能转头动作过滤（Roll 轴偏移补偿）
- 防误触冷却计时器（默认 5 秒）
- 低功耗姿态检测算法

### 🎮 游戏优化特性
- 亚秒级响应延迟（<50ms）
- 无边框窗口自适应
- 多分辨率支持（720P-4K）
- 硬件加速渲染管线

---

## 环境要求

### 硬件配置
- 支持 UVC 协议的摄像头设备
- 推荐 Intel i5 或同等性能处理器
- 最低 500MB 空闲内存

### 软件依赖
| 组件              | 最低版本   | 推荐版本   |
|-------------------|------------|------------|
| Python            | 3.8        | 3.11       |
| OpenCV            | 4.6.0      | 4.8.0      |
| MediaPipe         | 0.9.0      | 0.10.0     |
| NumPy             | 1.22.0     | 1.25.2     |

---

## 指南


UI 布局

视频监控区：左侧原始画面 / 右侧特征识别画面

控制面板：启动停止按钮 + 状态指示灯

调试信息：实时 EAR 值显示 + 灵敏度调节滑杆

操作流程
保持正对摄像头（推荐距离 50-80cm）

点击 启动检测 激活监控模式

自然眨眼触发点击（睁眼持续时间 >0.3 秒）

快速仰头保持 2 秒锁定系统

配置选项
核心参数表
参数	默认值	范围	作用域
ear_threshold	0.21	0.15-0.30	闭眼判定阈值
activation_frames	1	1-5	动作触发帧数
nod_required_frames	10	5-15	点头持续帧阈值
lock_cooldown	5	3-10	锁屏冷却时间
高级配置
python
复制
# 在 BlinkControlApp 类中修改以下参数
self.pitch_threshold = 25     # 点头识别角度（°）
self.roll_threshold = 30      # 转头过滤阈值（°）
self.img_width = 640          # 摄像头水平分辨率
注意事项
环境要求
光照强度：300-1000 lux

避免强背光/侧光环境

摄像头帧率需 ≥24 FPS

佩戴建议
框架眼镜：建议降低 EAR 阈值 0.02-0.05

美瞳用户：可能需要重新校准参数

刘海遮挡：确保眼部区域完全可见

健康提示
❗ 连续使用每 30 分钟应休息 5 分钟
❗ 出现眼干、疲劳等不适请立即停止


允许在保留版权声明的前提下自由使用、修改和分发本软件。
禁止将本代码用于面部识别监控等侵犯隐私的应用场景。

技术合作请联系: alexwhite@eschz.eu
让科技赋能游戏艺术 🎨✨

